{% extends 'globals/base.html' %}
{% load static %}
{% block title %}Club Feeds{% endblock %}
{% block css %}
  <link rel="stylesheet" href="{% static 'clubfeed/style/feedstyle.css' %}" />
{% endblock css %}

{% block body %}
  <div class="content-grid">
    <div class="column-center">
      <div class="content-area">
        <div class="card">
          <div><img id="output" style="width:100%;" /></div>
          <form method="post" action="clubfeed/addPost/" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="new-post-types">
              <div class="post-type">
                <select name="club" id="club" required>
                  <option value="">Choose Club</option>
                  {% for i in Club_name %}
                  <option value="{{i.club_name}}">{{i.club_name|title}}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="post-type">
                <input type="file" accept="image/*" name="image" id="image" onchange="loadImage(event)"
                  style="display: none;">
                <label for="image"><i class="photo-video-icon"></i> Add Image</label>
              </div>
              <div class="post-type">
                <input type="file" accept="video/*" name="reel" id="reel" onchange="loadVideo(event)"
                  style="display: none;">
                <label for="reel" style="cursor: pointer;"><i class="live-video-icon"></i> Add Reel</label>
              </div>
            </div>
            <div class="new-post-action">
              <img src="{% static 'clubfeed/images/profile-320.jpg'%}" class="my-profile" />
              <input type="text" placeholder="Share your thoughts?" name="desc" />
              <input type="submit" value="Post" />
            </div>
          </form>
        </div>
        {% for post in posts %}
        <div class="card post">
          <div class="post-header">
            <div class="post-author-info">
              <img src="{{ post.club.club_file.url }}" />
              <div>
                <div>
                  <span class="author-name">{{post.club | title}}</span>
                </div>
                <div class="details">
                  <span>By {{post.user.first_name|title}}</span>
                </div>
              </div>
            </div>
            <span>{{post.upload_time|date:'F j, Y'}}</span>
          </div>
          <p class="post-body">{{post.description}}</p>
          <a class="post-image">
            <img src="{{ post.file.url }}" />
          </a>
          <div class="post-actions">
            <div class="actions">
              <div class="action">
                <span>{{post.likes}}</span>
                <i class="like-icon"></i>
                <form action="clubfeed/like/{{post.id}}/" method="post">
                  {% csrf_token %}
                <input type="submit" value="Like">
              </form>
              </div>
              <div class="action">
                <i class="comment-icon"></i>
                <span>Comment</span>
              </div>
              <div class="action">
                <i class="share-icon"></i>
                <span>Share</span>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>


    <script>
      var loadImage = function (event) {
        var image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
      };
    </script>

  
{% endblock body %}